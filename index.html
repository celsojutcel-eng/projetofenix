<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Projeto F√™nix ‚Äî Planner Di√°rio</title>
<meta name="theme-color" id="meta-theme-color" content="#c084fc">
<link rel="manifest" href="manifest.json">

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<style>
body { font-family: 'Inter', sans-serif; background-color: #fdfbf7; color: #3d3d3d; transition: background-color 0.5s ease; }
h1,h2,h3,.font-serif { font-family: 'Playfair Display', serif; }
.mood-btn { padding:.5rem 1rem; border-radius:1rem; border:1px solid #ddd; cursor:pointer; transition:.3s; text-align: center; font-size: 0.875rem; background: white; }
.mood-btn.active { color:white; transform: scale(1.05); box-shadow:0 4px 12px rgba(0,0,0,.15); border-color: transparent; }
textarea,input { outline:none; }
::placeholder { color: #a89f91; opacity: 0.5; }

/* Cores Din√¢micas Baseadas no Humor */
.theme-leve { --main-color: #c084fc; } /* Roxo original */
.theme-cansada { --main-color: #94a3b8; } /* Azul acinzentado */
.theme-inspirada { --main-color: #fbbf24; } /* Dourado */
.theme-ansiosa { --main-color: #f87171; } /* Coral */
.theme-grata { --main-color: #4ade80; } /* Verde menta */
.theme-presente { --main-color: #2dd4bf; } /* Turquesa */

.dynamic-color { color: var(--main-color); transition: color 0.5s ease; }
.dynamic-bg { background-color: var(--main-color); transition: background-color 0.5s ease; }
.dynamic-border { border-color: var(--main-color); transition: border-color 0.5s ease; }
</style>
</head>
<body class="min-h-screen flex flex-col pb-20 theme-leve">

<header class="sticky top-0 bg-white/80 backdrop-blur-md border-b border-[#e8e2d9] p-4 flex justify-between items-center z-50">
<h1 class="text-xl md:text-3xl font-bold dynamic-color">Projeto F√™nix <span class="text-[#a89f91] font-light italic">2026</span></h1>
<button id="install-btn" class="p-2 rounded-full dynamic-bg text-white shadow-md hidden text-sm px-4">Instalar App</button>
</header>

<main class="max-w-3xl w-full mx-auto px-6 py-10 flex-grow">
  <div id="view-today">
    <div class="mb-6 flex flex-col md:flex-row md:justify-between md:items-end gap-4">
      <div>
        <h2 id="display-dayname" class="text-4xl font-serif capitalize">...</h2>
        <p id="display-date" class="text-gray-400 uppercase text-xs tracking-widest">...</p>
      </div>
      <input type="date" id="input-date" class="border border-[#e8e2d9] px-3 py-2 rounded-lg bg-white text-sm" onchange="loadDate(this.value)" />
    </div>

    <div class="mb-6 p-6 bg-gradient-to-br from-[#f7f0e8] to-white rounded-2xl shadow-sm text-center border border-[#eee6de]">
      <p class="text-[10px] uppercase tracking-widest text-[#c67b5c] font-black mb-2">Inspira√ß√£o F√™nix</p>
      <blockquote id="display-phrase" class="text-xl md:text-2xl font-serif italic text-[#5d4a44]">...</blockquote>
    </div>

    <div class="mb-6">
      <h3 class="font-serif font-bold mb-3 text-lg">üåø Check-in Emocional</h3>
      <div id="mood-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 gap-2"></div>
    </div>

    <div class="mb-6">
      <h3 class="font-serif font-bold mb-1 text-lg">ü™û Reflex√£o Profunda</h3>
      <p id="display-question" class="italic mb-3 font-medium text-sm dynamic-color">Carregando pergunta...</p>
      <textarea id="field-reconnection" class="w-full border border-[#e8e2d9] rounded-xl p-4 min-h-[120px] focus:ring-2 focus:ring-[#c084fc]/10" placeholder="Sua alma responde..." oninput="saveCurrent()"></textarea>
    </div>

    <div class="mb-6">
      <h3 class="font-serif font-bold mb-3 text-lg">‚úçÔ∏è Escrita Terap√™utica</h3>
      <textarea id="field-writing" class="w-full border border-[#e8e2d9] rounded-xl p-6 min-h-[200px]" placeholder="Escreva livremente..." oninput="saveCurrent()"></textarea>
    </div>

    <div class="grid md:grid-cols-2 gap-6">
      <div>
        <h3 class="font-serif font-bold mb-3 text-lg">Autocuidado</h3>
        <textarea id="field-selfcare" class="w-full border border-[#e8e2d9] rounded-xl p-4 min-h-[100px]" placeholder="O que voc√™ fez por voc√™?" oninput="saveCurrent()"></textarea>
      </div>
      <div>
        <h3 class="font-serif font-bold mb-3 text-lg">√Çncora do Dia</h3>
        <input type="text" id="field-keyword" class="w-full border border-[#e8e2d9] rounded-xl p-4 text-center font-bold dynamic-color text-xl" placeholder="Ex: Pausa" oninput="saveCurrent()" />
      </div>
    </div>

    <div class="mt-10 flex justify-center">
        <button onclick="downloadBackup()" class="text-[#a89f91] text-xs underline uppercase tracking-widest">Baixar Backup</button>
    </div>
  </div>
</main>

<script>
const FRASES_INSPIRACAO = [
    "A f√™nix n√£o apenas renasce, ela escolhe o que deixar virar cinzas.", "Sua luz interna √© o guia mais seguro em tempos de mudan√ßa.", "Honre o seu ritmo; at√© o sol tem seu tempo de se p√¥r para brilhar de novo.", "Pequenos passos di√°rios constroem caminhos extraordin√°rios.", "A cura n√£o √© linear, mas a persist√™ncia √© transformadora.", "Voc√™ √© o autor da sua pr√≥pria metamorfose.", "Onde houver sombra, lembre-se de que h√° uma luz por perto.", "Sua ess√™ncia √© inabal√°vel, mesmo quando tudo ao redor parece mudar.", "Cultive o jardim interno e as borboletas vir√£o.", "A coragem n√£o √© a aus√™ncia de medo, mas o agir apesar dele.", "Permita-se recome√ßar quantas vezes forem necess√°rias.", "Sua hist√≥ria de supera√ß√£o √© o mapa para o seu sucesso.", "O autocuidado √© a funda√ß√£o de todo o resto.", "Seja gentil consigo mesma; voc√™ est√° fazendo o seu melhor.", "A paci√™ncia √© a chave que abre as portas do amadurecimento.", "Brilhe sem pedir licen√ßa; o mundo precisa da sua luz.", "A gratid√£o transforma o que temos em suficiente.", "Sua for√ßa reside na sua vulnerabilidade.", "Mantenha os p√©s no ch√£o e os olhos nas estrelas.", "Cada novo amanhecer √© uma p√°gina em branco para o seu renascimento.", "N√£o compare o seu cap√≠tulo um com o cap√≠tulo vinte de outra pessoa.", "A paz come√ßa dentro de voc√™.", "Transforme suas cicatrizes em medalhas de honra.", "Acredite na magia dos novos come√ßos.", "Voc√™ √© mais forte do que imagina e mais capaz do que acredita.", "A felicidade √© um caminho, n√£o um destino.", "Escute a voz da sua intui√ß√£o; ela conhece o caminho.", "Semeie amor e colha liberdade.", "O agora √© o √∫nico lugar onde a vida acontece.", "Celebre suas pequenas vit√≥rias, elas s√£o o alicerce das grandes.", "Renascer exige coragem para deixar ir o que n√£o serve mais."
];

const PERGUNTAS_REFLEXAO = [
    "Qual parte de voc√™ est√° pronta para florescer hoje?", "O que voc√™ pode soltar agora para se sentir mais leve?", "Pelo que o seu 'eu' do futuro te agradeceria hoje?", "Como voc√™ pode ser seu pr√≥prio ref√∫gio neste momento?", "Qual foi a √∫ltima vez que voc√™ se orgulhou da sua coragem?", "O que o seu sil√™ncio est√° tentando te dizer hoje?", "Como voc√™ pode nutrir sua alma nas pr√≥ximas horas?", "Qual h√°bito antigo voc√™ est√° pronta para transformar em cinzas?", "Se o medo n√£o existisse, o que voc√™ faria agora?", "O que traz um brilho genu√≠no aos seus olhos?", "Como voc√™ pode ser 1% mais gentil consigo mesma hoje?", "Qual √© a sua √¢ncora nos dias de tempestade?", "O que voc√™ aprendeu sobre si mesma na √∫ltima semana?", "Quais s√£o os limites que voc√™ precisa estabelecer para sua paz?", "Se a sua vida fosse um livro, qual seria o t√≠tulo do cap√≠tulo de hoje?", "Pelo que voc√™ √© profundamente grata, mas raramente menciona?", "Como voc√™ pode expressar sua criatividade hoje?", "O que significa 'sucesso' para voc√™ neste exato momento?", "Qual pensamento voc√™ quer plantar na sua mente ao acordar?", "Como voc√™ lida com as suas sombras e inseguran√ßas?", "Qual √© o seu maior superpoder emocional?", "Se voc√™ pudesse dizer algo ao seu 'eu' de 10 anos atr√°s, o que seria?", "O que voc√™ est√° adiando que traria paz ao seu cora√ß√£o?", "Como voc√™ pode tornar seu ambiente um lugar mais sagrado?", "O que voc√™ descobriu que n√£o precisa mais carregar?", "Qual √© a inten√ß√£o mais pura por tr√°s das suas a√ß√µes de hoje?", "Como voc√™ define a sua pr√≥pria liberdade?", "O que faz voc√™ se sentir verdadeiramente conectada com a vida?", "Qual √© a li√ß√£o que o obst√°culo de hoje est√° tentando te ensinar?", "Como voc√™ quer ser lembrada pelas pessoas que cruzarem seu caminho?", "O que voc√™ escolhe abra√ßar hoje: o controle ou a entrega?"
];

let entries = JSON.parse(localStorage.getItem('projeto_fenix_data') || '[]');
let currentDate = new Date().toISOString().split('T')[0];
let currentEntry = null;
const MOODS = [
    {label: 'Leve', class: 'theme-leve', color: '#c084fc'},
    {label: 'Cansada', class: 'theme-cansada', color: '#94a3b8'},
    {label: 'Inspirada', class: 'theme-inspirada', color: '#fbbf24'},
    {label: 'Ansiosa', class: 'theme-ansiosa', color: '#f87171'},
    {label: 'Grata', class: 'theme-grata', color: '#4ade80'},
    {label: 'Presente', class: 'theme-presente', color: '#2dd4bf'}
];

const renderMoods = () => {
  const grid = document.getElementById('mood-grid');
  grid.innerHTML = MOODS.map(m => {
    const isActive = currentEntry?.mood === m.label;
    return `<button class="mood-btn ${isActive ? 'active' : ''}" 
            style="${isActive ? 'background-color:'+m.color : ''}"
            onclick="setMood('${m.label}')">${m.label}</button>`;
  }).join('');
};

window.setMood = (moodLabel) => {
  currentEntry.mood = moodLabel;
  updateTheme(moodLabel);
  renderMoods();
  saveCurrent();
};

const updateTheme = (moodLabel) => {
    const moodObj = MOODS.find(m => m.label === moodLabel) || MOODS[0];
    document.body.className = `min-h-screen flex flex-col pb-20 ${moodObj.class}`;
    document.getElementById('meta-theme-color').content = moodObj.color;
};

window.loadDate = (date) => {
  currentDate = date;
  document.getElementById('input-date').value = date;
  const d = new Date(date + 'T12:00:00');
  
  document.getElementById('display-dayname').innerText = d.toLocaleDateString('pt-BR', { weekday: 'long' });
  document.getElementById('display-date').innerText = d.toLocaleDateString('pt-BR', { day: '2-digit', month: 'long', year: 'numeric' });

  const dayIndex = d.getDate() - 1;
  const existing = entries.find(e => e.date === date);

  if (existing) {
    currentEntry = existing;
  } else {
    currentEntry = { 
        date, 
        phrase: FRASES_INSPIRACAO[dayIndex % 31], 
        question: PERGUNTAS_REFLEXAO[dayIndex % 31], 
        mood: '', reconnection: '', writing: '', selfcare: '', keyword: '' 
    };
  }

  updateTheme(currentEntry.mood);
  document.getElementById('display-phrase').innerText = currentEntry.phrase;
  document.getElementById('display-question').innerText = currentEntry.question;
  document.getElementById('field-reconnection').value = currentEntry.reconnection || "";
  document.getElementById('field-writing').value = currentEntry.writing || "";
  document.getElementById('field-selfcare').value = currentEntry.selfcare || "";
  document.getElementById('field-keyword').value = currentEntry.keyword || "";

  renderMoods();
};

window.saveCurrent = () => {
  if (!currentEntry) return;
  currentEntry.reconnection = document.getElementById('field-reconnection').value;
  currentEntry.writing = document.getElementById('field-writing').value;
  currentEntry.selfcare = document.getElementById('field-selfcare').value;
  currentEntry.keyword = document.getElementById('field-keyword').value;

  const idx = entries.findIndex(e => e.date === currentEntry.date);
  if (idx > -1) entries[idx] = currentEntry;
  else entries.push(currentEntry);

  localStorage.setItem('projeto_fenix_data', JSON.stringify(entries));
};

window.downloadBackup = () => {
  const blob = new Blob([JSON.stringify(entries, null, 2)], { type: 'application/json' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a'); a.href = url;
  a.download = `backup-fenix-${currentDate}.json`;
  a.click();
};

loadDate(currentDate);

if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('./sw.js').catch(() => {});
  });
}
</script>
</body>
</html>

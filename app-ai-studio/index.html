<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projeto F√™nix - Planner 2026</title>
    
    <!-- Bibliotecas e Fontes -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --color-bg: #fdfbf7;
            --color-primary: #c67b5c;
            --color-secondary: #5d4a44;
            --color-accent: #8ba68b;
            --color-text: #3d3d3d;
            --color-muted: #a89f91;
            --color-border: #e8e2d9;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--color-bg);
            color: var(--color-text);
            scroll-behavior: smooth;
        }

        h1, h2, h3, .font-serif {
            font-family: 'Playfair Display', serif;
        }

        /* Estiliza√ß√£o Customizada */
        .card {
            background: white;
            border: 1px solid var(--color-border);
            border-radius: 1.5rem;
            box-shadow: 0 4px 20px -5px rgba(0,0,0,0.05);
        }

        .input-elegant {
            background: #fdfbf7;
            border: 1px solid var(--color-border);
            border-radius: 1rem;
            padding: 1rem;
            width: 100%;
            transition: all 0.3s ease;
        }

        .input-elegant:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(198, 123, 92, 0.1);
        }

        .btn-mood {
            padding: 0.75rem 1rem;
            border-radius: 1rem;
            border: 1px solid var(--color-border);
            font-size: 0.875rem;
            transition: all 0.2s;
            background: white;
        }

        .btn-mood.active {
            background: var(--color-primary);
            color: white;
            border-color: var(--color-primary);
            transform: scale(1.05);
        }

        /* Anima√ß√µes */
        .fade-in {
            animation: fadeIn 0.4s ease-out forwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .loader {
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--color-primary);
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Esconder views */
        .view { display: none; }
        .view.active { display: block; }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.3",
    "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
    "react/": "https://esm.sh/react@^19.2.3/",
    "recharts": "https://esm.sh/recharts@^3.6.0",
    "@google/genai": "https://esm.sh/@google/genai@^1.34.0"
  }
}
</script>
</head>
<body class="pb-24 md:pb-8">

    <!-- Header -->
    <header class="sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-[#e8e2d9]">
        <div class="max-w-4xl mx-auto px-4 py-4 flex flex-col md:flex-row items-center justify-between gap-4">
            <div class="text-center md:text-left">
                <h1 class="text-2xl md:text-3xl font-bold text-[#c67b5c]">
                    Projeto F√™nix <span class="text-[#a89f91] font-light italic">2026</span>
                </h1>
                <p class="text-[10px] uppercase tracking-[0.2em] text-[#a89f91] font-bold">Redescubra sua ess√™ncia diariamente</p>
            </div>
            
            <nav class="hidden md:flex items-center gap-8">
                <button onclick="switchView('today')" class="nav-link text-sm font-bold text-[#c67b5c]" id="nav-today">Di√°rio</button>
                <button onclick="switchView('history')" class="nav-link text-sm font-medium text-gray-500 hover:text-[#c67b5c]" id="nav-history">Hist√≥rico</button>
                <button onclick="switchView('insights')" class="nav-link text-sm font-medium text-gray-500 hover:text-[#c67b5c]" id="nav-insights">Insights</button>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-3xl mx-auto px-4 py-8">
        
        <!-- View: TODAY -->
        <div id="view-today" class="view active fade-in">
            <div id="today-content">
                <!-- Carregando state -->
                <div id="loading-overlay" class="flex flex-col items-center justify-center py-20 text-center">
                    <div class="loader mb-4"></div>
                    <p class="italic font-serif text-gray-500">Preparando seu espa√ßo sagrado...</p>
                </div>

                <!-- Conte√∫do Real (Injetado via JS) -->
                <div id="entry-form" class="hidden space-y-10">
                    <!-- Date & Selector -->
                    <div class="flex flex-col md:flex-row md:items-center justify-between border-b border-gray-200 pb-6 gap-4">
                        <div>
                            <h2 id="display-day-name" class="text-4xl font-serif text-gray-800">Segunda-feira</h2>
                            <p id="display-full-date" class="text-gray-400 uppercase text-xs tracking-widest mt-1">01 de Janeiro de 2026</p>
                        </div>
                        <input type="date" id="date-picker" class="bg-white border border-gray-200 rounded-full px-4 py-2 text-sm font-bold text-[#c67b5c]">
                    </div>

                    <!-- Phrase Card -->
                    <div class="bg-gradient-to-br from-[#f7f0e8] to-white p-10 rounded-[2.5rem] border border-[#f0e6da] shadow-sm text-center">
                        <p class="text-[10px] uppercase tracking-widest text-[#c67b5c] font-black mb-4">Inspira√ß√£o F√™nix</p>
                        <blockquote id="display-phrase" class="text-2xl md:text-3xl font-serif italic text-[#5d4a44] leading-tight">
                            "O renascimento come√ßa com o sil√™ncio."
                        </blockquote>
                    </div>

                    <!-- Mood -->
                    <section class="space-y-4">
                        <div class="flex items-center gap-2">
                            <span class="text-xl">üåø</span>
                            <h3 class="font-serif font-bold text-lg">Check-in Emocional</h3>
                        </div>
                        <div class="grid grid-cols-2 sm:grid-cols-4 gap-2" id="mood-container">
                            <!-- Injetado via JS -->
                        </div>
                    </section>

                    <!-- Reconnection -->
                    <section class="space-y-4">
                        <div class="flex items-center gap-2">
                            <span class="text-xl">ü™û</span>
                            <h3 class="font-serif font-bold text-lg">Reflex√£o Profunda</h3>
                        </div>
                        <div class="card p-6 md:p-8 space-y-4">
                            <p id="display-question" class="text-[#5d4a44] font-serif italic text-lg leading-relaxed"></p>
                            <textarea id="input-reconnection" class="input-elegant min-h-[100px]" placeholder="Sua alma responde..."></textarea>
                        </div>
                    </section>

                    <!-- Writing -->
                    <section class="space-y-4">
                        <div class="flex items-center gap-2">
                            <span class="text-xl">‚úçÔ∏è</span>
                            <h3 class="font-serif font-bold text-lg">Escrita Terap√™utica</h3>
                        </div>
                        <div class="relative">
                            <textarea id="input-writing" class="input-elegant min-h-[300px]" placeholder="Escreva livremente, sem filtros..."></textarea>
                            <div id="display-ai-insight" class="mt-4 p-4 bg-[#f0f4f0] border-l-4 border-[#8ba68b] text-[#4a5d4a] text-sm italic rounded-r-xl hidden">
                            </div>
                        </div>
                    </section>

                    <!-- Microaction & Keyword -->
                    <div class="grid md:grid-cols-2 gap-6">
                        <section class="space-y-4">
                            <h3 class="font-serif font-bold">Autocuidado</h3>
                            <textarea id="input-selfcare" class="input-elegant h-24" placeholder="Uma pequena a√ß√£o hoje..."></textarea>
                        </section>
                        <section class="space-y-4">
                            <h3 class="font-serif font-bold">√Çncora do Dia</h3>
                            <input type="text" id="input-keyword" class="input-elegant font-bold text-center text-[#c67b5c] text-lg" placeholder="Ex: Pausa">
                        </section>
                    </div>
                </div>
            </div>
        </div>

        <!-- View: HISTORY -->
        <div id="view-history" class="view fade-in">
            <h2 class="text-3xl font-serif text-gray-800 border-b border-gray-200 pb-4 mb-6">Seu Caminho de Renascimento</h2>
            <div id="history-list" class="space-y-4">
                <!-- Injetado via JS -->
            </div>
        </div>

        <!-- View: INSIGHTS -->
        <div id="view-insights" class="view fade-in">
            <h2 class="text-3xl font-serif text-gray-800 text-center mb-10">O Mapa da sua Alma</h2>
            <div class="grid md:grid-cols-2 gap-6" id="insights-container">
                <!-- Injetado via JS -->
            </div>
        </div>

    </main>

    <!-- Navigation Mobile -->
    <nav class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 flex justify-around py-3 md:hidden z-50">
        <button onclick="switchView('today')" class="flex flex-col items-center gap-1 text-[#c67b5c]">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" /></svg>
            <span class="text-[10px] font-bold">Hoje</span>
        </button>
        <button onclick="switchView('history')" class="flex flex-col items-center gap-1 text-gray-400">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
            <span class="text-[10px] font-bold">Hist√≥rico</span>
        </button>
        <button onclick="switchView('insights')" class="flex flex-col items-center gap-1 text-gray-400">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" /></svg>
            <span class="text-[10px] font-bold">Insights</span>
        </button>
    </nav>

    <!-- Feedback de Salva -->
    <div id="save-indicator" class="fixed bottom-24 right-6 md:bottom-8 md:right-8 bg-white/90 backdrop-blur border border-gray-200 px-4 py-2 rounded-full text-[10px] font-bold text-gray-400 shadow-lg hidden">
        Sincronizando com sua ess√™ncia...
    </div>

    <!-- Scripts de L√≥gica -->
    <script>
/* ===============================
   PROJETO F√äNIX ‚Äì PLANNER 2026
   Vers√£o SEM IA (GitHub Pages OK)
================================ */

let state = {
    currentView: 'today',
    selectedDate: new Date().toISOString().split('T')[0],
    entries: JSON.parse(localStorage.getItem('projeto_fenix_data') || '[]'),
    currentEntry: null
};

const MOODS = [
    'Leve', 'Cansada', 'Inspirada', 'Ansiosa',
    'Presente', 'Confusa', 'Grata', 'Empoderada'
];

// Frases e perguntas fallback
const FALLBACK_CONTENT = [
    {
        phrase: "O renascimento come√ßa quando voc√™ se escuta.",
        question: "O que seu corpo e sua alma pedem hoje?"
    },
    {
        phrase: "Toda pausa tamb√©m √© um avan√ßo.",
        question: "Onde voc√™ pode ser mais gentil consigo mesma?"
    },
    {
        phrase: "Voc√™ n√£o precisa carregar tudo sozinha.",
        question: "O que pode ser solto agora?"
    },
    {
        phrase: "H√° for√ßa na sua sensibilidade.",
        question: "Que parte sua merece acolhimento hoje?"
    },
    {
        phrase: "Seu ritmo tamb√©m √© sagrado.",
        question: "Como honrar seu tempo hoje?"
    }
];

// ---------------- INIT ----------------
function init() {
    renderView();
    setupEventListeners();
}

// ---------------- NAV ----------------
window.switchView = function(viewName) {
    state.currentView = viewName;

    document.querySelectorAll('.nav-link').forEach(l => {
        l.classList.remove('text-[#c67b5c]', 'border-b-2', 'border-[#c67b5c]', 'pb-1');
        l.classList.add('text-gray-500');
    });

    const activeLink = document.getElementById(`nav-${viewName}`);
    if (activeLink) {
        activeLink.classList.add('text-[#c67b5c]', 'border-b-2', 'border-[#c67b5c]', 'pb-1');
        activeLink.classList.remove('text-gray-500');
    }

    document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
    document.getElementById(`view-${viewName}`).classList.add('active');

    renderView();
};

// ---------------- RENDER ----------------
function renderView() {
    if (state.currentView === 'today') {
        loadDailyEntry(state.selectedDate);
    } else if (state.currentView === 'history') {
        renderHistory();
    } else if (state.currentView === 'insights') {
        renderInsights();
    }
}

// ---------------- DAILY ----------------
function loadDailyEntry(date) {
    const form = document.getElementById('entry-form');
    const loading = document.getElementById('loading-overlay');

    form.classList.add('hidden');
    loading.classList.remove('hidden');

    let entry = state.entries.find(e => e.date === date);

    if (!entry) {
        const random = FALLBACK_CONTENT[Math.floor(Math.random() * FALLBACK_CONTENT.length)];
        entry = {
            date,
            phrase: random.phrase,
            question: random.question,
            mood: '',
            reconnection: '',
            writing: '',
            selfcare: '',
            keyword: ''
        };
        state.entries.push(entry);
        saveData();
    }

    state.currentEntry = entry;
    populateForm(entry);

    loading.classList.add('hidden');
    form.classList.remove('hidden');
}

function populateForm(entry) {
    const d = new Date(entry.date + 'T12:00:00');

    document.getElementById('display-day-name').textContent =
        d.toLocaleDateString('pt-BR', { weekday: 'long' }).replace(/^./, m => m.toUpperCase());

    document.getElementById('display-full-date').textContent =
        d.toLocaleDateString('pt-BR', { day: '2-digit', month: 'long', year: 'numeric' });

    document.getElementById('date-picker').value = entry.date;
    document.getElementById('display-phrase').textContent = `"${entry.phrase}"`;
    document.getElementById('display-question').textContent = entry.question;

    document.getElementById('input-reconnection').value = entry.reconnection;
    document.getElementById('input-writing').value = entry.writing;
    document.getElementById('input-selfcare').value = entry.selfcare;
    document.getElementById('input-keyword').value = entry.keyword;

    const moodContainer = document.getElementById('mood-container');
    moodContainer.innerHTML = '';

    MOODS.forEach(m => {
        const btn = document.createElement('button');
        btn.className = `btn-mood ${entry.mood === m ? 'active' : ''}`;
        btn.textContent = m;
        btn.onclick = () => {
            entry.mood = m;
            saveData();
            populateForm(entry);
        };
        moodContainer.appendChild(btn);
    });
}

// ---------------- HISTORY ----------------
function renderHistory() {
    const list = document.getElementById('history-list');
    list.innerHTML = '';

    const sorted = [...state.entries].sort((a, b) => b.date.localeCompare(a.date));

    if (sorted.length === 0) {
        list.innerHTML = '<p class="text-center py-10 text-gray-400 italic">Sua hist√≥ria come√ßa aqui...</p>';
        return;
    }

    sorted.forEach(e => {
        const d = new Date(e.date + 'T12:00:00');
        const div = document.createElement('div');
        div.className = 'card p-6 flex justify-between items-center cursor-pointer hover:border-[#c67b5c] transition-all group';
        div.onclick = () => {
            state.selectedDate = e.date;
            switchView('today');
        };

        div.innerHTML = `
            <div>
                <p class="text-[10px] font-bold text-[#c67b5c] uppercase">
                    ${d.toLocaleDateString('pt-BR', { weekday: 'short' })}
                </p>
                <h4 class="font-serif text-lg">
                    ${d.toLocaleDateString('pt-BR', { day: '2-digit', month: 'long' })}
                </h4>
                <p class="text-xs text-gray-400 italic line-clamp-1">"${e.phrase}"</p>
            </div>
            <span class="text-[10px] bg-[#fdf7f2] px-2 py-1 rounded text-[#c67b5c] font-bold">
                ${e.mood || 'Sem humor'}
            </span>
        `;
        list.appendChild(div);
    });
}

// ---------------- INSIGHTS ----------------
function renderInsights() {
    const container = document.getElementById('insights-container');
    container.innerHTML = '';

    if (state.entries.length < 2) {
        container.innerHTML = '<div class="col-span-full text-center py-20 italic text-gray-400">Escreva mais alguns dias para ver seus padr√µes.</div>';
        return;
    }

    const moods = {};
    state.entries.forEach(e => {
        if (e.mood) moods[e.mood] = (moods[e.mood] || 0) + 1;
    });

    const moodCard = document.createElement('div');
    moodCard.className = 'card p-8 space-y-6';
    moodCard.innerHTML = '<h3 class="font-serif text-xl font-bold border-b pb-2">Suas Emo√ß√µes</h3>';

    const list = document.createElement('div');
    list.className = 'space-y-3';

    Object.entries(moods).forEach(([name, count]) => {
        const percent = (count / state.entries.length) * 100;
        list.innerHTML += `
            <div>
                <div class="flex justify-between text-xs font-bold uppercase text-gray-500">
                    <span>${name}</span><span>${count}x</span>
                </div>
                <div class="w-full bg-gray-100 h-1.5 rounded-full">
                    <div class="bg-[#c67b5c] h-full" style="width:${percent}%"></div>
                </div>
            </div>
        `;
    });

    moodCard.appendChild(list);
    container.appendChild(moodCard);
}

// ---------------- SAVE ----------------
function saveData() {
    const indicator = document.getElementById('save-indicator');
    indicator.classList.remove('hidden');
    localStorage.setItem('projeto_fenix_data', JSON.stringify(state.entries));
    setTimeout(() => indicator.classList.add('hidden'), 800);
}

// ---------------- EVENTS ----------------
function setupEventListeners() {
    document.getElementById('date-picker').onchange = e => {
        state.selectedDate = e.target.value;
        loadDailyEntry(state.selectedDate);
    };

    ['input-reconnection', 'input-writing', 'input-selfcare', 'input-keyword'].forEach(id => {
        document.getElementById(id).oninput = e => {
            const key = id.split('-')[1];
            state.currentEntry[key] = e.target.value;
            saveData();
        };
    });
}

// BOOT
init();
</script>
</body>
</html>

